/* 
Reducer - phonesPage

Reducer это функция, которая берет предыдущее состояние и action
 и возвращает новое состояние. Она является чистой,
 так как не модифицирует данные, а возвращает новые данные. 

 Здесь мы хотим тут слушать екшен FETCH_PHONES_SUCCESS
 и перезаписывать все idшники полученных треков в массив
*/

import R from "ramda";

import {
    FETCH_PHONES_SUCCESS,
    LOAD_MORE_PHONES_SUCCESS
  } from 'actionTypes'

const initialState = {
  // Здесь initialState у нас будет обьект с полем ids, где мы будем хранить idшники телефонов
  ids: []
};

export default (state = initialState, { type, payload }) => {
  switch (type) {
      // CASE - загрузить телефоны
    case FETCH_PHONES_SUCCESS:
        // Возвращает слияние State с 
      return R.merge(state, {
        // функция pluck из Ramda возьмет из массива обьектов все id и положит в новый массив
        ids: R.pluck("id", payload)
      });

        // CASE - загрузить еще
      case LOAD_MORE_PHONES_SUCCESS:
      const ids = R.pluck('id', payload)
      return R.merge(state, {
          // Добавляем еще телефонов к старым в state
        ids: R.concat(ids, state.ids)
      })

    default:
      return state;
  }
};
